<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Novos Usu√°rios - Os Sacanas Hub</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: #fff; }
        .container { max-width: 1200px; margin: 0 auto; }
        .user-card { background: #2d2d2d; padding: 20px; margin: 10px; border-radius: 8px; border: 1px solid #444; }
        .user-card h3 { color: #00ff88; margin: 0 0 10px 0; }
        .credentials { background: #333; padding: 10px; border-radius: 5px; font-family: monospace; }
        .test-btn { background: #007acc; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin: 5px; }
        .test-btn:hover { background: #005a99; }
        .result { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .success { background: #2d5a2d; border: 1px solid #4caf50; }
        .error { background: #5a2d2d; border: 1px solid #f44336; }
        .users-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ Teste de Novos Usu√°rios - Os Sacanas Hub</h1>
        
        <div class="user-card">
            <h2>üìã Usu√°rios Criados</h2>
            <p>Total de novos usu√°rios adicionados: <strong>6</strong></p>
            <button class="test-btn" onclick="testAllUsers()">Testar Todos os Logins</button>
            <button class="test-btn" onclick="clearResults()">Limpar Resultados</button>
        </div>

        <div class="users-grid" id="usersGrid">
            <!-- Os cards dos usu√°rios ser√£o inseridos aqui -->
        </div>
    </div>

    <script src="config.js"></script>
    <script>
        const API_BASE_URL = window.API_CONFIG ? API_CONFIG.getBaseURL() : 'http://localhost:3000';
        
        const newUsers = [
            { username: "n3tu62", password: "Euclides2015@", email: "n3tu62.gamer@hotmail.com" },
            { username: "euclidesfaminto", password: "novinha6969", email: "euclides.hungry@gmail.com" },
            { username: "juzelians", password: "carrapeta99", email: "juzelians.pro@outlook.com" },
            { username: "Penis123", password: "CumPissBalls", email: "penis.legend@yahoo.com" },
            { username: "23dede", password: "123456", email: "dede23.player@live.com" },
            { username: "pimba", password: "yan2020123", email: "pimba.yan@protonmail.com" }
        ];

        function createUserCard(user, index) {
            return `
                <div class="user-card">
                    <h3>üë§ ${user.username}</h3>
                    <div class="credentials">
                        <strong>Username:</strong> ${user.username}<br>
                        <strong>Senha:</strong> ${user.password}<br>
                        <strong>Email:</strong> ${user.email}
                    </div>
                    <button class="test-btn" onclick="testLogin('${user.username}', '${user.password}', ${index})">
                        üîë Testar Login
                    </button>
                    <div id="result-${index}" class="result" style="display: none;"></div>
                </div>
            `;
        }

        async function testLogin(username, password, index) {
            const resultDiv = document.getElementById(`result-${index}`);
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<p>üîÑ Testando login...</p>';
            resultDiv.className = 'result';

            try {
                const response = await fetch(`${API_BASE_URL}/api/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ username, password })
                });

                const data = await response.json();

                if (response.ok && data.success) {
                    resultDiv.innerHTML = `
                        <p><strong>‚úÖ Login Bem-sucedido!</strong></p>
                        <p>Role: ${data.user.role}</p>
                        <p>ID: ${data.user.id}</p>
                        <p>Email: ${data.user.email}</p>
                    `;
                    resultDiv.className = 'result success';
                } else {
                    resultDiv.innerHTML = `
                        <p><strong>‚ùå Falha no Login</strong></p>
                        <p>Erro: ${data.message || 'Credenciais inv√°lidas'}</p>
                    `;
                    resultDiv.className = 'result error';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p><strong>üí• Erro de Conex√£o</strong></p>
                    <p>${error.message}</p>
                `;
                resultDiv.className = 'result error';
            }
        }

        async function testAllUsers() {
            for (let i = 0; i < newUsers.length; i++) {
                const user = newUsers[i];
                await testLogin(user.username, user.password, i);
                // Pequeno delay entre os testes
                await new Promise(resolve => setTimeout(resolve, 500));
            }
        }

        function clearResults() {
            newUsers.forEach((_, index) => {
                const resultDiv = document.getElementById(`result-${index}`);
                if (resultDiv) {
                    resultDiv.style.display = 'none';
                }
            });
        }

        // Inicializar a p√°gina
        document.addEventListener('DOMContentLoaded', () => {
            const grid = document.getElementById('usersGrid');
            grid.innerHTML = newUsers.map((user, index) => createUserCard(user, index)).join('');
        });
    </script>
</body>
</html>
